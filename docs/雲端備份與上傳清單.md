# 主要檔案位置與上傳雲端清單

**目前環境紀錄：** 全域 OpenClaw（gateway）已更新至 **2.9**。（`openclaw --version` 可確認。）

---

## 一、主要檔案都在哪

### 1. 任務面板專案（程式碼 + 設定範本）

**路徑：** `/Users/caijunchang/openclaw任務面版設計/`

| 類別 | 路徑 | 說明 |
|------|------|------|
| 前端程式 | `src/` | React 頁面、元件、服務、hooks |
| 後端程式 | `server/src/` | API、Supabase、executor、Telegram 等 |
| 設定檔 | 根目錄 `package.json`、`vite.config.ts`、`tsconfig.*`、`railway.json` 等 | 建置與部署用 |
| 文件 | `docs/` | 說明與 migration SQL |
| 腳本 | `scripts/` | 重啟 gateway、緊急停止等 |
| n8n 流程 | `n8n-workflows/` | 排程、webhook 定義 |
| 知識/記憶（可選） | `knowledge/`, `memories/` | 若你當成專案一部分就一併傳 |
| 公開資源 | `public/` | favicon、robots.txt 等 |

**不要傳上雲端（含密鑰或可重建）：**

- `.env` — 含 Supabase key、API key 等，**不要上傳**
- `node_modules/`、`server/node_modules/` — 到雲端再 `npm install`
- `dist/`、`dist-ssr/` — 建置產物，雲端會自己 build
- `ollama_bot2.env`、`ollama_monitor_bot.env` — 若有 key/token，不要上傳
- `openclaw-main/` — 體積大，可排除或改用 git submodule

**可傳（當範本）：** `.env.example`（雲端上再複製成 `.env` 並填真實值）。

---

### 2. OpenClaw Gateway 的設定與資料（本機）

**路徑：** `~/.openclaw/`（即 `/Users/caijunchang/.openclaw/`）

| 內容 | 說明 |
|------|------|
| `openclaw.json` | Gateway 設定（channel、model、agents 等） |
| `credentials/` | WhatsApp、Telegram 等登入資料（**敏感**） |
| `agents/` | Agent 設定、auth-profiles、session 等（**敏感**） |
| `workspace/` 或 `workspace-*/` | 工作目錄檔案（視需求備份） |
| `.env` | 若在這裡放 API key，**不要上傳** |

若要「傳上雲端」做備份，建議**只備份設定**（例如 `openclaw.json`），且**不要**把含密鑰的 `credentials/`、`agents/` 放到公開或未加密的雲端。

---

### 3. 已經在雲端的東西

- **Supabase**：任務、runs、reviews、audit 等資料已在 Supabase 雲端，不需從本機「上傳」資料表內容；只要專案程式與連線設定正確即可。

---

## 二、建議「傳上雲端」的範圍

### 方案 A：只傳任務面板專案（最常見）

- **傳什麼**：整個 `openclaw任務面版設計` 資料夾，但**排除**：
  - `node_modules`、`server/node_modules`
  - `.env`、`*.env`（或只傳 `.env.example`）
  - `dist`、`openclaw-main`（若體積大）
  - `ollama_bot2.env`、`ollama_monitor_bot.env`（若有密鑰）
- **雲端上**：複製 `.env.example` 成 `.env`，在雲端環境填 Supabase URL/Key、API key 等，然後 `npm install`、`npm run build`。

### 方案 B：連 OpenClaw 設定一起備份（私用、建議加密）

- **傳什麼**：
  - 同上專案內容；
  - 再加上 `~/.openclaw/openclaw.json`（必要時可加 `~/.openclaw/.env` 的**脫敏版**，例如只留變數名、不寫真實 key）。
- **不要傳**：`~/.openclaw/credentials/`、`~/.openclaw/agents/` 等含 token 的目錄，除非放到**私密且加密**的儲存（如加密 zip + 私人雲端）。

---

## 三、快速檢查清單（上傳前）

- [ ] 已排除 `.env` 和所有含 API key / token 的檔案
- [ ] 已排除 `node_modules`、`dist`
- [ ] 雲端上有 `.env.example` 可當範本
- [ ] 若備份 `~/.openclaw/`，只備份 `openclaw.json`，不備份 credentials/agents（或先加密再傳）

這樣你的「主要檔案」就清楚知道在哪、哪些適合傳上雲端、哪些要留在本機或加密處理。

---

## 四、升級時「會被覆蓋」的範圍

### A. 升級 OpenClaw（`npm install -g openclaw@latest`）

| 會被覆蓋 | 說明 |
|----------|------|
| 全域安裝的 openclaw 套件 | 例如 `/usr/local/lib/node_modules/openclaw/`（或 `npm root -g` 底下的 `openclaw`）裡的程式碼、依賴。 |

| 不會被覆蓋 | 說明 |
|------------|------|
| `~/.openclaw/` 整個目錄 | 含 `openclaw.json`、`credentials/`、`agents/`、workspace、`.env` 等，**都不會動**。 |
| 你的專案資料夾 | `openclaw任務面版設計`、任何本機專案都不受影響。 |
| Supabase 上的資料 | 任務、runs、reviews 等都在雲端，與本機升級無關。 |

結論：升級 openclaw 只換掉「指令與程式」，你的設定、登入、session、專案**都不會被覆蓋**。

---

### B. 升級 / 更新「任務面板專案」（例如 git pull、重新部署）

| 可能被覆蓋 | 說明 |
|------------|------|
| 被 Git 追蹤的檔案 | `git pull` 會用遠端版本蓋掉本機的 `src/`、`server/src/`、`package.json`、`docs/`、腳本等「有在 repo 裡」的檔案。 |
| `node_modules/` | 執行 `npm install` 或 `pnpm install` 會依新 lockfile 重裝，內容會被重算（不算覆蓋你手改的，因為一般不手改這裡）。 |

| 不會被覆蓋（通常） | 說明 |
|--------------------|------|
| `.env` | 已在 `.gitignore`，`git pull` 不會帶下來，本機的 `.env` 會保留。 |
| `ollama_bot2.env`、`ollama_monitor_bot.env` | 若沒被 git 追蹤，本機保留。 |
| 未追蹤的檔案 | 例如本機自己加的 script、筆記，只要沒 `git add`，就不會被覆蓋。 |
| Supabase 資料 | 在雲端，不會被本機或部署覆蓋。 |
| `~/.openclaw/` | 不在專案目錄內，完全不受專案 git 影響。 |

若在雲端（如 Railway）用「從 Git 重新部署」：覆蓋的是**雲端上的程式碼與建置結果**，環境變數是在平台裡設的，不會被 repo 裡的檔案覆蓋（repo 通常也沒有 `.env`）。

---

### 建議：升級前想留的，先備份

- 改過但還沒 push 的程式：`git diff` 或 `git stash`，或另存一份。
- `~/.openclaw/`：若要保險可再跑一次  
  `cp -r ~/.openclaw ~/.openclaw-backup-$(date +%Y%m%d-%H%M)`  
  再執行升級。
