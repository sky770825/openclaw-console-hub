{
  "name": "Telegram ä»»å‹™ç‹€æ…‹ï¼ˆ/statusï¼‰",
  "nodes": [
    {
      "parameters": {},
      "id": "t5-001-telegram-trigger",
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "t5-if-status",
              "leftValue": "={{ $json.message?.text || $json.body?.message?.text || '' }}",
              "rightValue": "/status",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "t5-002-if",
      "name": "æ˜¯ /status å—",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [460, 300]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "={{ $env.TASKBOARD_API || 'http://localhost:3011' }}/api/openclaw/tasks",
        "options": {}
      },
      "id": "t5-003-get-tasks",
      "name": "å–å¾—ä»»å‹™åˆ—è¡¨",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [680, 200]
    },
    {
      "parameters": {
        "jsCode": "const items = $input.first().json;\nconst list = Array.isArray(items) ? items : (items.data || []);\nconst queued = list.filter(t => (t.status || '') === 'queued').length;\nconst inProgress = list.filter(t => (t.status || '') === 'in_progress').length;\nconst done = list.filter(t => (t.status || '') === 'done').length;\nlet text = `ğŸ“Š ä»»å‹™ç‹€æ…‹\\næ’éšŠ: ${queued} | é€²è¡Œä¸­: ${inProgress} | å®Œæˆ: ${done}\\n`;\nif (list.length > 0) {\n  const top = list.slice(0, 5);\n  text += '\\næœ€è¿‘ä»»å‹™:\\n' + top.map(t => `â€¢ ${t.title || t.id} [${t.status || '-'}] ${(t.progress || 0)}%`).join('\\n');\n}\nreturn [{ json: { reply: text } }];"
      },
      "id": "t5-004-format",
      "name": "æ•´ç†æ‘˜è¦",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 200]
    },
    {
      "parameters": {
        "resource": "message",
        "operation": "send",
        "chatId": "={{ $('Telegram Trigger').first().json.message.chat.id }}",
        "text": "={{ $json.reply }}",
        "additionalFields": {}
      },
      "id": "t5-005-reply",
      "name": "å›è¦†ç‹€æ…‹",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [1120, 200]
    }
  ],
  "connections": {
    "Telegram Trigger": {
      "main": [[{ "node": "æ˜¯ /status å—", "type": "main", "index": 0 }]]
    },
    "æ˜¯ /status å—": {
      "main": [
        [{ "node": "å–å¾—ä»»å‹™åˆ—è¡¨", "type": "main", "index": 0 }],
        []
      ]
    },
    "å–å¾—ä»»å‹™åˆ—è¡¨": {
      "main": [[{ "node": "æ•´ç†æ‘˜è¦", "type": "main", "index": 0 }]]
    },
    "æ•´ç†æ‘˜è¦": {
      "main": [[{ "node": "å›è¦†ç‹€æ…‹", "type": "main", "index": 0 }]]
    }
  },
  "settings": { "executionOrder": "v1" },
  "meta": {
    "description": "Telegram å‚³ /status å–å¾—ä»»å‹™æ¿æ‘˜è¦ä¸¦å›è¦†ã€‚éœ€åœ¨ n8n è¨­å®š Telegram Credentials èˆ‡ TASKBOARD_APIã€‚"
  }
}
